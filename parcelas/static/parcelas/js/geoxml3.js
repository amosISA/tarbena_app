if(window.google&&google.maps){function MultiGeometry(e){function o(e,o){var t=new google.maps.Polyline(e);return google.maps.event.addListener(t,"click",function(e){google.maps.event.trigger(o,"click",e)}),google.maps.event.addListener(t,"dblclick",function(e){google.maps.event.trigger(o,"dblclick",e)}),google.maps.event.addListener(t,"mousedown",function(e){google.maps.event.trigger(o,"mousedown",e)}),google.maps.event.addListener(t,"mousemove",function(e){google.maps.event.trigger(o,"mousemove",e)}),google.maps.event.addListener(t,"mouseout",function(e){google.maps.event.trigger(o,"mouseout",e)}),google.maps.event.addListener(t,"mouseover",function(e){google.maps.event.trigger(o,"mouseover",e)}),google.maps.event.addListener(t,"mouseup",function(e){google.maps.event.trigger(o,"mouseup",e)}),google.maps.event.addListener(t,"rightclick",function(e){google.maps.event.trigger(o,"rightclick",e)}),t}for(this.setValues(e),this.polylines=[],i=0;i<this.paths.length;i++){var t=e;t.path=this.paths[i];var r=o(t,this);this.polylines.push(r)}}MultiGeometry.prototype=new google.maps.MVCObject,MultiGeometry.prototype.changed=function(e){if(this.polylines)for(var o=0;o<this.polylines.length;o++)this.polylines[o].set(e,this.get(e))},MultiGeometry.prototype.setMap=function(e){this.set("map",e)},MultiGeometry.prototype.getMap=function(){return this.get("map")}}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),geoXML3=window.geoXML3||{instances:[]},geoXML3.parser=function(e){google.maps.MVCObject.call(this);var o,t=new geoXML3.parserOptions(e),r=[],n={},i={},a={};!t.infoWindow&&t.singleInfoWindow&&(t.infoWindow=new google.maps.InfoWindow);function l(e,o,r){if(r=r||function(e){w(e,o)},"function"==typeof ZipFile&&"object"==typeof JSIO&&"function"==typeof JSIO.guessFileType&&(/^data:[^,]*(kmz)/.test(o.baseUrl)?contentType=JSIO.FileType.Binary:/^data:[^,]*(kml|xml)/.test(o.baseUrl)?contentType=JSIO.FileType.XML:/^data:/.test(o.baseUrl)?contentType=JSIO.FileType.Unknown:t.forceZip?contentType=JSIO.FileType.Binary:contentType=JSIO.guessFileType(o.baseUrl),contentType==JSIO.FileType.Binary||contentType==JSIO.FileType.Unknown))return o.isCompressed=!0,o.baseDir=o.baseUrl+"/",void geoXML3.fetchZIP(e,r,o.internals.parser);o.isCompressed=!1,o.baseDir=defileURL(o.baseUrl),geoXML3.fetchXML(e,r)}var s={balloon:{bgColor:"ffffffff",textColor:"ff000000",text:"<h3>$[name]</h3>\n<div>$[description]</div>\n<div>$[geDirections]</div>",displayMode:"default"},icon:{scale:1,dim:{x:0,y:0,w:-1,h:-1},hotSpot:{x:.5,y:.5,xunits:"fraction",yunits:"fraction"}},line:{color:"ffffffff",colorMode:"normal",width:1},poly:{color:"ffffffff",colorMode:"normal",fill:!0,outline:!0}},g="http://www.google.com/kml/ext/2.2",d=geoXML3.nodeValue,p=geoXML3.getBooleanValue,c=geoXML3.getElementsByTagNameNS,f=geoXML3.getElementsByTagName;function u(e){var o=d(f(e,"styleUrl")[0]);if(o&&-1!=o.indexOf("#"))var t=o.split("#");else t=["",""];return t}function m(e,o,t,r){var n,l="{inline}"===o?h(s):a[o][t]=a[o][t]||h(s);if((n=f(e,"BalloonStyle"))&&n.length>0&&(l.balloon.bgColor=d(f(n[0],"bgColor")[0],l.balloon.bgColor),l.balloon.textColor=d(f(n[0],"textColor")[0],l.balloon.textColor),l.balloon.text=d(f(n[0],"text")[0],l.balloon.text),l.balloon.displayMode=d(f(n[0],"displayMode")[0],l.balloon.displayMode)),(n=f(e,"IconStyle"))&&n.length>0){var u=l.icon;u.scale=parseFloat(d(f(n[0],"scale")[0],u.scale)),(n=f(n[0],"hotSpot"))&&n.length>0&&(u.hotSpot={x:n[0].getAttribute("x"),y:n[0].getAttribute("y"),xunits:n[0].getAttribute("xunits"),yunits:n[0].getAttribute("yunits")}),(n=f(e,"Icon"))&&n.length>0&&(u.href=d(f(n[0],"href")[0]),u.url=cleanURL(r,u.href),i[u.url]&&(u.url=i[u.url].dataUrl),u.dim={x:parseInt(d(c(n[0],g,"x")[0],u.dim.x)),y:parseInt(d(c(n[0],g,"y")[0],u.dim.y)),w:parseInt(d(c(n[0],g,"w")[0],u.dim.w)),h:parseInt(d(c(n[0],g,"h")[0],u.dim.h))},u.img=new Image,u.img.onload=function(){u.dim.w<0||u.dim.h<0?(u.dim.w=this.width,u.dim.h=this.height):u.dim.th=this.height},u.img.src=u.url,u.img.width>0&&(u.dim.w<0||u.dim.h<0?(u.dim.w=u.img.width,u.dim.h=u.img.height):u.dim.th=u.img.height))}return(n=f(e,"LineStyle"))&&n.length>0&&(l.line.color=d(f(n[0],"color")[0],l.line.color),l.line.colorMode=d(f(n[0],"colorMode")[0],l.line.colorMode),l.line.width=d(f(n[0],"width")[0],l.line.width)),(n=f(e,"PolyStyle"))&&n.length>0&&(l.poly.color=d(f(n[0],"color")[0],l.poly.color),l.poly.colorMode=d(f(n[0],"colorMode")[0],l.poly.colorMode),l.poly.outline=p(f(n[0],"outline")[0],l.poly.outline),l.poly.fill=p(f(n[0],"fill")[0],l.poly.fill)),l}function h(e){if(null==e||"object"!=typeof e)return e;if(e.cloneNode)return e.cloneNode(!0);var o=new e.constructor;for(var t in e)o[t]=h(e[t]);return o}function y(e,o,r,n){for(var i=f(e,"Pair"),l=new Object,g=0;g<i.length;g++){var p=d(f(i[g],"key")[0]),c=d(f(i[g],"Style")[0]),y=u(i[g]),v=y[0]?cleanURL(n,y[0]):o,w=y[1];c?l[p]=m(c,v,w):w&&a[v][w]&&(l[p]=h(a[v][w]))}l.normal?a[o][r]=h(l.normal):a[o][r]=h(s),l.highlight&&t.processStyles&&b(l.highlight),a[o][r].map=h(l)}function v(e,o){for(var t=f(e,o),r=[],n=0;n<t.length;n++){var i=f(t[n],"coordinates");if(!i){if(r.length>0)break;return[{coordinates:[]}]}for(var a=0;a<i.length;a++){for(var l=d(i[a]).trim(),s=(l=l.replace(/,\s+/g,",")).split(/\s+/g),g=s.length,p=[],c=0;c<g;c++)l=s[c].split(","),isNaN(l[0])||isNaN(l[1])||p.push({lat:parseFloat(l[1]),lng:parseFloat(l[0]),alt:parseFloat(l[2])});r.push({coordinates:p})}}return r}var w=function(e,L){if(!e||"failed parse"==e)return geoXML3.log("Unable to retrieve "+L.url),t.failedParse&&t.failedParse(L),void(L.failed=!0);if(e.parseError&&0!=e.parseError.errorCode){var M=e.parseError,S="Parse error in line "+M.line+", col "+M.linePos+" (error code: "+M.errorCode+")\n\nError Reason: "+M.reason+"Error Line: "+M.srcText;return geoXML3.log("Unable to retrieve "+L.url+": "+S),t.failedParse&&t.failedParse(L),void(L.failed=!0)}if(e.documentElement&&"parsererror"==e.documentElement.nodeName)return geoXML3.log("Unable to retrieve "+L.url+": "+e.documentElement.childNodes[0].nodeValue),t.failedParse&&t.failedParse(L),void(L.failed=!0);if(!L)throw"geoXML3 internal error: render called with null document";L.placemarks=[],L.groundoverlays=[],L.ggroundoverlays=[],L.networkLinks=[],L.gpolygons=[],L.gpolylines=[];for(var I,T,B,N=f(e,"styleUrl"),U=L.internals.docSet,A=0;A<N.length;A++){var E=d(N[A]).split("#")[0];if(E){var D=cleanURL(L.baseDir,E);if(D!==L.baseUrl&&!n[D]){var C;if(-1!=(ie=U.indexOfObjWithItem("baseUrl",D))){if((C=U[ie]).failed)continue}else(C=new Object).url=D,C.baseUrl=D,C.internals=L.internals,L.internals.docSet.push(C),L.internals.remaining++;return void l(D,C,function(o){w(o,C),w(e,L)})}}}for(L.styles=a[L.baseUrl]=a[L.baseUrl]||{},N=f(e,"Style"),nodeCount=N.length,A=0;A<nodeCount;A++){thisNode=N[A],(R=thisNode.getAttribute("id"))&&m(thisNode,L.baseUrl,R,L.baseDir)}for(N=f(e,"StyleMap"),A=0;A<N.length;A++){var R;thisNode=N[A],(R=thisNode.getAttribute("id"))&&y(thisNode,L.baseUrl,R,L.baseDir)}if(!t.processStyles&&t.createMarker||k(L),L.reload&&L.markers)for(A=0;A<L.markers.length;A++)L.markers[A].active=!1;var F=f(e,"Placemark");for(pm=0;pm<F.length;pm++){var j=u(T=F[pm]);(I={name:d(f(T,"name")[0]),description:d(f(T,"description")[0]),styleUrl:j.join("#"),styleBaseUrl:j[0]?cleanURL(L.baseDir,j[0]):L.baseUrl,styleID:j[1],visibility:p(f(T,"visibility")[0],!0),balloonVisibility:p(c(T,g,"balloonVisibility")[0],!t.suppressInfoWindows),id:T.getAttribute("id")}).style=a[I.styleBaseUrl]&&a[I.styleBaseUrl][I.styleID]||h(s);var W=f(T,"Style");if(W&&W.length>0){var z=m(T,"{inline}","{inline}");b(z),z&&(I.style=z)}/^https?:\/\//.test(I.description)&&(I.description=['<a href="',I.description,'">',I.description,"</a>"].join("")),I.vars={display:{name:"Name",description:"Description",address:"Street Address",id:"ID",Snippet:"Snippet",geDirections:"Directions"},val:{name:I.name||"",description:I.description||"",address:d(f(T,"address")[0],""),id:T.getAttribute("id")||"",Snippet:d(f(T,"Snippet")[0],"")},directions:["f=d","source=GeoXML3"]};var H=f(T,"ExtendedData");if(H&&H.length>0)for(var V=f(H[0],"Data"),G=0;G<V.length;G++){var K=V[G],Z=K.getAttribute("name");if(Z){var J=d(f(K,"displayName")[0],Z),$=d(f(K,"value")[0]);I.vars.val[Z]=$,I.vars.display[Z]=J}}var Q=f(T,"coordinates");if(Q&&Q.length>0)for(var Y=0;Y<Q.length;Y++){if(Q[Y].parentNode&&Q[Y].parentNode.nodeName)switch(Q[Y].parentNode.nodeName){case"Point":I.Point=v(T,"Point")[0],I.latlng=new google.maps.LatLng(I.Point.coordinates[0].lat,I.Point.coordinates[0].lng),1;break;case"LinearRing":B=f(T,"Polygon"),I.Polygon||(I.Polygon=[{outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]}]);for(var _=0;_<B.length;_++)I.Polygon[_]={outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]},I.Polygon[_].outerBoundaryIs=v(B[_],"outerBoundaryIs"),I.Polygon[_].innerBoundaryIs=v(B[_],"innerBoundaryIs");ne=I.Polygon[0].outerBoundaryIs;break;case"LineString":0,I.LineString=v(T,"LineString")}}var q,ee,oe=c(T,g,"Track"),te=[];if(oe.length>0){for(A=0;A<oe.length;A++){for(var re=c(oe[A],g,"coord"),ne=[],ie=0;ie<re.length;ie++){var ae;ae=(ae=geoXML3.nodeValue(re[ie]).trim()).split(/\s+/g),isNaN(ae[0])||isNaN(ae[1])||ne.push({lat:parseFloat(ae[1]),lng:parseFloat(ae[0]),alt:parseFloat(ae[2])})}te.push({coordinates:ne})}I.Track=te}if(t.pmParseFn&&t.pmParseFn(T,I),L.placemarks.push(I),I.Point){google.maps&&(L.bounds=L.bounds||new google.maps.LatLngBounds,L.bounds.extend(I.latlng));var le,se=t.createMarker||x,ge=!1;if(!t.createMarker&&L&&(L.markers=L.markers||[],L.reload))for(ie=0;ie<L.markers.length;ie++)if(L.markers[ie].id==I.id||!L.markers[ie].id&&L.markers[ie].getPosition().equals(I.latlng)){ge=L.markers[ie].active=!0;break}if(!ge)(le=se(I,L))&&(le.active=I.visibility,le.id=I.id)}L&&(I.Polygon&&(L.gpolygons=L.gpolygons||[]),I.LineString&&(L.gpolylines=L.gpolylines||[]),I.Track&&(L.gpolylines=L.gpolylines||[]));var de=t.createPolygon||X,pe=t.createLineString||P;I.Polygon&&(q=de(I,L))&&(q.active=I.visibility),I.LineString&&(ee=pe(I,L))&&(ee.active=I.visibility),I.Track&&(ee=pe(I,L))&&(ee.active=I.visibility),google.maps&&(L.bounds=L.bounds||new google.maps.LatLngBounds,q&&L.bounds.union(q.bounds),ee&&L.bounds.union(ee.bounds))}if(L.reload&&L.markers)for(A=L.markers.length-1;A>=0;A--)L.markers[A].active||(L.markers[A].infoWindow&&L.markers[A].infoWindow.close(),L.markers[A].setMap(null),L.markers.splice(A,1));var ce,fe=t.createOverlay||O;if(L.reload&&L.groundoverlays)for(A=0;A<L.groundoverlays.length;A++)L.groundoverlays[A].active=!1;L&&(L.groundoverlays=L.groundoverlays||[]);var ue,me=f(e,"GroundOverlay");for(A=0;A<me.length;A++){T=me[A];var he=cleanURL(L.baseDir,d(f(T,"href")[0]));i[he]&&(he=i[he].dataUrl),ce={name:d(f(T,"name")[0]),description:d(f(T,"description")[0]),icon:{href:he},latLonBox:{north:parseFloat(d(f(T,"north")[0])),east:parseFloat(d(f(T,"east")[0])),south:parseFloat(d(f(T,"south")[0])),west:parseFloat(d(f(T,"west")[0]))},rotation:-1*parseFloat(d(f(T,"rotation")[0]))},google.maps&&(L.bounds=L.bounds||new google.maps.LatLngBounds,L.bounds.union(new google.maps.LatLngBounds(new google.maps.LatLng(ce.latLonBox.south,ce.latLonBox.west),new google.maps.LatLng(ce.latLonBox.north,ce.latLonBox.east))));var ye=f(T,"color");ye&&ye.length>0?ce.opacity=geoXML3.getOpacity(d(ye[0])):ce.opacity=1,L.groundoverlays.push(ce);ge=!1;if(L){if(L.groundoverlays=L.groundoverlays||[],L.reload)for(overlayBounds=new google.maps.LatLngBounds(new google.maps.LatLng(ce.latLonBox.south,ce.latLonBox.west),new google.maps.LatLng(ce.latLonBox.north,ce.latLonBox.east)),A=(ve=L.groundoverlays).length;A--;)if(ve[A].bounds().equals(overlayBounds)&&ve.url_===ce.icon.href){ge=ve[A].active=!0;break}ge||(fe(ce,L).active=!0)}if(L.reload&&L.groundoverlays&&L.groundoverlays.length){var ve;for(A=(ve=L.groundoverlays).length;A--;)ve[A].active||(ve[A].remove(),ve.splice(A,1));L.groundoverlays=ve}}var we=document.location.pathname.split("/");we=we.splice(0,we.length-1).join("/");var Le=f(e,"NetworkLink");for(A=0;A<Le.length;A++)T=Le[A],(ue={name:d(f(T,"name")[0]),link:{href:d(f(T,"href")[0]),refreshMode:d(f(T,"refreshMode")[0])}}).link.refreshMode||(ue.link.refreshMode="onChange"),"onInterval"===ue.link.refreshMode?(ue.link.refreshInterval=parseFloat(d(f(T,"refreshInterval")[0])),isNaN(ue.link.refreshInterval)&&(ue.link.refreshInterval=0)):"onChange"===ue.link.refreshMode&&(ue.link.viewRefreshMode=d(f(T,"viewRefreshMode")[0]),ue.link.viewRefreshMode||(ue.link.viewRefreshMode="never"),"onStop"===ue.link.viewRefreshMode&&(ue.link.viewRefreshTime=d(f(T,"refreshMode")[0]),ue.link.viewFormat=d(f(T,"refreshMode")[0]),ue.link.viewFormat||(ue.link.viewFormat="BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]"))),/^[\/|http]/.test(ue.link.href)||(ue.link.href=we+"/"+ue.link.href),"onInterval"===ue.link.refreshMode&&ue.link.refreshInterval>0?setInterval(o+'.parse("'+ue.link.href+'")',1e3*ue.link.refreshInterval):"onChange"===ue.link.refreshMode&&("never"===ue.link.viewRefreshMode?L.internals.parser.parse(ue.link.href,L.internals.docSet):ue.link.viewRefreshMode);if(L.bounds&&(L.internals.bounds=L.internals.bounds||new google.maps.LatLngBounds,L.internals.bounds.union(L.bounds)),(L.markers||L.groundoverlays||L.gpolylines||L.gpolygons)&&(L.internals.parseOnly=!1),!L.internals.parseOnly&&L.baseUrl)if(n[L.baseUrl])for(var A in n[L.baseUrl])n[L.baseUrl][A]=L[A];else r.push(L),n[L.baseUrl]=L;L.internals.remaining--,0===L.internals.remaining&&(t.zoom&&L.internals.bounds&&!L.internals.bounds.isEmpty()&&t.map&&t.map.fitBounds(L.internals.bounds),t.afterParse&&t.afterParse(L.internals.docSet),google.maps.event.trigger(L.internals.parser,"parsed"))},L=function(e,o){var t={},r=(e=e||"ffffffff").substr(0,2),n=e.substr(2,2),i=e.substr(4,2),a=e.substr(6,2);return t.opacity=parseInt(r,16)/256,t.color="random"===o?M(a,i,n):"#"+a+i+n,t},M=function(e,o,t){var r={rr:e,gg:o,bb:t};for(var n in r){var i=r[n];null==i&&(i="ff"),1===(i=Math.round(Math.random()*parseInt(e,16)).toString(16)).length&&(i="0"+i),r[n]=i}return"#"+r.rr+r.gg+r.bb},b=function(e){var o=e.icon;if(o&&o.href){if(o.img&&!o.img.complete&&o.dim.w<0&&o.dim.h<0)return o.markerBacklog=[],void(o.img.onload=function(){o.dim.w<0||o.dim.h<0?(o.dim.w=this.width,o.dim.h=this.height):o.dim.th=this.height,b(e);for(var t=0;t<o.markerBacklog.length;t++){var r=o.markerBacklog[t][0],n=o.markerBacklog[t][1];x(r,n),r.marker&&(r.marker.active=!0)}delete o.markerBacklog});o.img&&o.img.complete?o.dim.w<0||o.dim.h<0?(o.dim.w=o.img.width,o.dim.h=o.img.height):o.dim.th=o.img.height:(o.dim.whGuess=!0,o.dim.w=32,o.dim.h=32,o.dim.th=32);var t=Math.round,r=o.dim.y;void 0!==o.dim.th&&o.dim.th!=o.dim.h&&(r=Math.abs(r-(o.dim.th-o.dim.h)));var n,a,l={x:o.dim.x*o.scale,y:r*o.scale,w:o.dim.w*o.scale,h:o.dim.h*o.scale,aX:o.hotSpot.x*o.scale,aY:o.hotSpot.y*o.scale,iW:(o.img?o.img.width:o.dim.w)*o.scale,iH:(o.img?o.img.height:o.dim.h)*o.scale};switch(o.hotSpot.xunits){case"fraction":n=t(l.aX*o.dim.w);break;case"insetPixels":n=t(o.dim.w*o.scale-l.aX);break;default:n=t(l.aX)}switch(o.hotSpot.yunits){case"fraction":a=l.h-t(o.dim.h*l.aY);break;case"insetPixels":a=t(l.aY);break;default:a=t(o.dim.h*o.scale-l.aY)}var s=new google.maps.Point(n,a),g=o.dim.whGuess?null:new google.maps.Size(t(l.w),t(l.h)),d=1==o.scale?null:o.dim.whGuess?new google.maps.Size(t(l.w),t(l.h)):new google.maps.Size(t(l.iW),t(l.iH)),p=new google.maps.Point(t(l.x),t(l.y));i[o.url]&&(o.url=i[o.url].dataUrl),o.marker={url:o.url,size:g,origin:p,anchor:s,scaledSize:d};var c=new google.maps.Size(59,32),f=new google.maps.Point(16,32);/\/(red|blue|green|yellow|lightblue|purple|pink|orange)(-dot)?\.png/.test(o.href)?o.shadow={url:"http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png",size:c,origin:null,anchor:f,scaledSize:c}:o.href.indexOf("-pushpin.png")>-1&&(o.shadow={url:"http://maps.google.com/mapfiles/ms/micons/pushpin_shadow.png",size:c,origin:null,anchor:f,scaledSize:c})}},k=function(e){for(var o in e.styles)b(e.styles[o])},x=function(e,o){var r=e.style.icon;if(!r.marker&&r.img)return r.markerBacklog=r.markerBacklog||[],void r.markerBacklog.push([e,o]);var n=geoXML3.combineOptions(t.markerOptions,{map:t.map,position:new google.maps.LatLng(e.Point.coordinates[0].lat,e.Point.coordinates[0].lng),title:e.name,zIndex:Math.round(-1e5*e.Point.coordinates[0].lat)<<5,icon:r.marker,shadow:r.shadow,flat:!r.shadow,visible:e.visibility}),i=new google.maps.Marker(n);return o&&o.markers.push(i),S(e,o,i),e.marker=i,i},O=function(e,o){if(!window.ProjectedOverlay)throw"geoXML3 error: ProjectedOverlay not found while rendering GroundOverlay from KML";var r=new google.maps.LatLngBounds(new google.maps.LatLng(e.latLonBox.south,e.latLonBox.west),new google.maps.LatLng(e.latLonBox.north,e.latLonBox.east)),n=geoXML3.combineOptions(t.overlayOptions,{percentOpacity:100*e.opacity,rotation:e.rotation}),i=new ProjectedOverlay(t.map,e.icon.href,r,n);return o&&(o.ggroundoverlays=o.ggroundoverlays||[],o.ggroundoverlays.push(i)),i},P=function(e,o){var r=[],n=new google.maps.LatLngBounds;if(e.LineString)for(var i=0;i<e.LineString.length;i++){for(var a=[],l=e.LineString[i].coordinates,s=0;s<l.length;s++){var g=new google.maps.LatLng(l[s].lat,l[s].lng);a.push(g),n.extend(g)}r.push(a)}else if(e.Track)for(i=0;i<e.Track.length;i++){for(a=[],l=e.Track[i].coordinates,s=0;s<l.length;s++){g=new google.maps.LatLng(l[s].lat,l[s].lng);a.push(g),n.extend(g)}r.push(a)}r[0][Math.floor(a.length/2)];var d=L(e.style.line.color,e.style.line.colorMode),p=geoXML3.combineOptions(t.polylineOptions,{map:t.map,path:a,strokeColor:d.color,strokeWeight:e.style.line.width,strokeOpacity:d.opacity,title:e.name,visible:e.visibility});if(r.length>1){p.paths=r;var c=new MultiGeometry(p)}else{p.path=r[0];c=new google.maps.Polyline(p)}return c.bounds=n,S(e,o,c),o&&o.gpolylines.push(c),e.polyline=c,c},X=function(e,o){for(var r=new google.maps.LatLngBounds,n=[],i=0;i<e.Polygon.length;i++){for(var a=0;a<e.Polygon[i].outerBoundaryIs.length;a++){for(var l=e.Polygon[i].outerBoundaryIs[a].coordinates,s=[],g=0;g<l.length;g++){var d=new google.maps.LatLng(l[g].lat,l[g].lng);s.push(d),r.extend(d)}n.push(s),s.length}for(a=0;a<e.Polygon[i].innerBoundaryIs.length;a++){for(l=e.Polygon[i].innerBoundaryIs[a].coordinates,s=[],g=0;g<l.length;g++){d=new google.maps.LatLng(l[g].lat,l[g].lng);s.push(d),r.extend(d)}n.push(s),s.length}}var p=L(e.style.line.color,e.style.line.colorMode),c=L(e.style.poly.color,e.style.poly.colorMode);e.style.poly.fill||(c.opacity=0);var f=e.style.line.width;e.style.poly.outline||(f=0,p.opacity=0);var u=geoXML3.combineOptions(t.polygonOptions,{map:t.map,paths:n,title:e.name,strokeColor:p.color,strokeWeight:f,strokeOpacity:p.opacity,fillColor:c.color,fillOpacity:c.opacity,visible:e.visibility}),m=new google.maps.Polygon(u);return m.bounds=r,S(e,o,m),o&&o.gpolygons.push(m),e.polygon=m,m},S=function(e,o,r){var n=e.style.balloon,a=e.vars;if(e.balloonVisibility&&"hide"!==n.displayMode){if(!e.latlng||t.suppressDirections&&t.suppressDirections)a.val.geDirections="";else{a.directions.push("sll="+e.latlng.toUrlValue());var l="http://maps.google.com/maps?"+a.directions.join("&"),s=encodeURIComponent(a.val.address||e.latlng.toUrlValue()).replace(/\%20/g,"+");a.val.geDirections='<a href="'+l+"&daddr="+s+'" target=_blank>To Here</a> - <a href="'+l+"&saddr="+s+'" target=_blank>From Here</a>'}var g=n.text.replace(/\$\[(\w+(\/displayName)?)\]/g,function(e,o,t){return t?a.display[o]:a.val[o]}),d="geoxml3_infowindow geoxml3_style_"+e.styleID,p=[];"ffffffff"!=n.bgColor&&p.push("background: "+L(n.bgColor).color+";"),"ff000000"!=n.textColor&&p.push("color: "+L(n.textColor).color+";");var c=p.length?' style="'+p.join(" ")+'"':"",f=geoXML3.combineOptions(t.infoWindowOptions,{content:'<div class="'+d+'"'+c+">"+g+"</div>",pixelOffset:new google.maps.Size(0,2)});r.infoWindow=t.infoWindow||new google.maps.InfoWindow(f),r.infoWindowOptions=f,google.maps.event.addListener(r,"click",function(e){var t=this.infoWindow;t.close(),t.setOptions(this.infoWindowOptions),e&&e.latLng?t.setPosition(e.latLng):this.bounds&&t.setPosition(this.bounds.getCenter()),t.setContent("<div id='geoxml3_infowindow'>"+t.getContent()+"</div>"),google.maps.event.addListenerOnce(t,"domready",function(){for(var e=document.getElementById("geoxml3_infowindow").getElementsByTagName("img"),t=0;t<e.length;t++){var r=e[t].getAttribute("src"),n=cleanURL(o.baseDir,r);i[n]?e[t].src=i[n].dataUrl:i[r]&&(e[t].src=i[r].dataUrl)}}),t.open(this.map,this.bounds?null:this)})}};return{options:t,docs:r,docsByUrl:n,kmzMetaData:i,parse:function(e,r){o||(o="geoXML3.instances["+(geoXML3.instances.push(this)-1)+"]"),"string"==typeof e&&(e=[e]);for(var i,a={parser:this,docSet:r||[],remaining:e.length,parseOnly:!(t.afterParse||t.processStyles)},s=0;s<e.length;s++){var g=cleanURL(defileURL(location.pathname),e[s]);n[g]?(i=n[g]).reload=!0:((i=new Object).baseUrl=g,a.docSet.push(i)),i.url=e[s],i.internals=a,l(i.url,i)}},render:w,parseKmlString:function(e,o){var r={parser:this,docSet:o||[],remaining:1,parseOnly:!(t.afterParse||t.processStyles)};thisDoc=new Object,thisDoc.internals=r,r.docSet.push(thisDoc),w(geoXML3.xmlParse(e),thisDoc)},hideDocument:function(e){var o;if(e||(e=r[0]),e.markers)for(o=0;o<e.markers.length;o++)e.markers[o].infoWindow&&e.markers[o].infoWindow.close(),e.markers[o].setVisible(!1);if(e.ggroundoverlays)for(o=0;o<e.ggroundoverlays.length;o++)e.ggroundoverlays[o].setOpacity(0);if(e.gpolylines)for(o=0;o<e.gpolylines.length;o++)e.gpolylines[o].infoWindow&&e.gpolylines[o].infoWindow.close(),e.gpolylines[o].setMap(null);if(e.gpolygons)for(o=0;o<e.gpolygons.length;o++)e.gpolygons[o].infoWindow&&e.gpolygons[o].infoWindow.close(),e.gpolygons[o].setMap(null)},showDocument:function(e){var o;if(e||(e=r[0]),e.markers)for(o=0;o<e.markers.length;o++)e.markers[o].setVisible(!0);if(e.ggroundoverlays)for(o=0;o<e.ggroundoverlays.length;o++)e.ggroundoverlays[o].setOpacity(e.ggroundoverlays[o].percentOpacity_);if(e.gpolylines)for(o=0;o<e.gpolylines.length;o++)e.gpolylines[o].setMap(t.map);if(e.gpolygons)for(o=0;o<e.gpolygons.length;o++)e.gpolygons[o].setMap(t.map)},processStyles:k,createMarker:x,createOverlay:O,createPolyline:P,createPolygon:X}},geoXML3.getOpacity=function(e){return e&&""!==e&&8==e.length?parseInt(e.substr(0,2),16)/255:1},geoXML3.log=function(e){window.console?console.log(e):alert("log:"+e)},geoXML3.parserOptions=function(e){if(this.map=null,this.zoom=!0,this.singleInfoWindow=!1,this.suppressInfoWindows=!1,this.processStyles=!1,this.markerOptions={},this.infoWindowOptions={},this.overlayOptions={},this.afterParse=null,this.failedParse=null,this.createMarker=null,this.createOverlay=null,e)for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return this},geoXML3.combineOptions=function(e,o){var t={};if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);if(o)for(r in o)o.hasOwnProperty(r)&&void 0===t[r]&&(t[r]=o[r]);return t},geoXML3.parserOptions.prototype.combineOptions=geoXML3.combineOptions,geoXML3.fetchers=[],geoXML3.xmlParse=function(e){if("undefined"!=typeof ActiveXObject||"ActiveXObject"in window){var o=new ActiveXObject("Microsoft.XMLDOM");return o.loadXML(e),o}return"undefined"!=typeof DOMParser?(new DOMParser).parseFromString(e,"text/xml"):document.createElement("div",null)},geoXML3.isParseError=function(e){if("undefined"!=typeof ActiveXObject||"ActiveXObject"in window)return!1;var o=(new DOMParser).parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===o?e.getElementsByTagName("parsererror").length>0:e.getElementsByTagNameNS(o,"parsererror").length>0},geoXML3.fetchXML=function(e,o){var t=new Object;if(geoXML3.fetchers.length)t=geoXML3.fetchers.pop();else if(window.XMLHttpRequest)t.fetcher=new window.XMLHttpRequest;else if(window.ActiveXObject){for(var r=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML.XMLHTTP"],n=0;n<r.length;n++)try{t.fetcher=new ActiveXObject(r[n]);break}catch(e){continue}if(!t.fetcher)return geoXML3.log("Unable to create XHR object"),o(null),null}return t.fetcher.open("GET",e,!0),t.fetcher.overrideMimeType&&t.fetcher.overrideMimeType("text/xml"),t.fetcher.onreadystatechange=function(){if(4===t.fetcher.readyState){if(t.xhrtimeout&&clearTimeout(t.xhrtimeout),t.fetcher.status>=400)geoXML3.log("HTTP error "+t.fetcher.status+" retrieving "+e),o();else{if(t.fetcher.responseXML){var r=t.fetcher.responseXML;!r||r.documentElement||r.ownerElement||r.loadXML(t.fetcher.responseText)}else r=geoXML3.xmlParse(t.fetcher.responseText);r.parseError&&0!=r.parseError.errorCode?(geoXML3.log("XML parse error "+r.parseError.errorCode+", "+r.parseError.reason+"\nLine:"+r.parseError.line+", Position:"+r.parseError.linepos+", srcText:"+r.parseError.srcText),r="failed parse"):geoXML3.isParseError(r)&&(geoXML3.log("XML parse error"),r="failed parse"),o(r)}geoXML3.fetchers.push(t)}},t.xhrtimeout=setTimeout(function(){o()},6e4),t.fetcher.send(null),null};var IEversion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var o=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(o)&&(e=parseFloat(RegExp.$1))}return e};geoXML3.fetchZIP=function(e,o,t){new ZipFile(e,function(r){for(var n=0;n<r.status.length;n++){var i=r.status[n];if(0==i.indexOf("ERROR"))return geoXML3.log("HTTP/ZIP error retrieving "+e+": "+i),void o();if(0==i.indexOf("EXCEPTION"))return geoXML3.log("HTTP/ZIP exception retrieving "+e+": "+i),void o();0==i.indexOf("WARNING")?geoXML3.log("HTTP/ZIP warning retrieving "+e+": "+i):0==i.indexOf("INFO")&&geoXML3.log("HTTP/ZIP info retrieving "+e+": "+i)}var a,l=0;for(n=0;n<r.entries.length;n++){var s=r.entries[n].name;/\.kml$/.test(s)&&(1==++l?a=n:geoXML3.log("KMZ warning retrieving "+e+': found extra KML "'+s+'" in KMZ; discarding...'))}var g=cleanURL(defileURL(e),e)+"/",d={timer:null,extractLeft:0,timerCalls:0},p=function(e,r){var n,i=cleanURL(g,e.name),a=e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase();if(d.extractLeft--,"string"==typeof r.description&&"Error"==r.name)return geoXML3.log("KMZ error extracting "+i+": "+r.description),void o();"jpg"===a&&(a="jpeg"),n=/^(gif|jpeg|png)$/.test(a)?"image/"+a:"mp3"===a?"audio/mpeg":"m4a"===a?"audio/mp4":"m4a"===a?"audio/MP4-LATM":"application/octet-stream",t.kmzMetaData[i]={},t.kmzMetaData[i].entry=e,t.kmzMetaData[i].dataUrl="data:"+n+";base64,"+base64Encode(r),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&(IEversion()<8&&t.kmzMetaData[i].dataUrl.length>2071||IEversion<9&&t.kmzMetaData[i].dataUrl.length>32767)&&(t.kmzMetaData[i].dataUrl="data:image/gif;base64,R0lGODlhDwAQAOMPADBPvSpQ1Dpoyz1p6FhwvU2A6ECP63CM04CWxYCk+V6x+UK++Jao3rvC3fj7+v///yH5BAEKAA8ALAAAAAAPABAAAASC8Mk5mwCAUMlWwcLRHEelLAoGDMgzSsiyGCAhCETDPMh5XQCBwYBrNBIKWmg0MCQHj8MJU5IoroYCY6AAAgrDIbbQDGIK6DR5UPhlNo0JAlSUNAiDgH7eNAxEDWAKCQM2AAFheVxYAA0AIkFOJ1gBcQQaUQKKA5w7LpcEBwkJaKMUEQA7"),t.kmzMetaData[internalSrc(e.name)]=t.kmzMetaData[i]},c=function(t,r){return"string"==typeof r.description&&"Error"==r.name?(geoXML3.log("KMZ error extracting "+t.name+": "+r.description),void o()):(clearTimeout(d.timer),d.extractLeft<=1?(d.extractLeft--,void o(geoXML3.xmlParse(r))):(d.timerCalls++,void(d.timerCalls<100?d.timer=setTimeout(function(){c(t,r)},100):(geoXML3.log("KMZ warning extracting "+e+": entire ZIP has not been extracted after 10 seconds; running through KML, anyway..."),d.extractLeft--,o(geoXML3.xmlParse(r))))))};for(n=0;n<r.entries.length;n++){var f=r.entries[n],u=f.name.substring(f.name.lastIndexOf(".")+1).toLowerCase();/^(gif|jpe?g|png|kml)$/.test(u)&&("kml"===u&&n!=a||(t||"kml"==u)&&(d.extractLeft++,"kml"===u?f.extract(c):f.extract(p)))}})},geoXML3.nodeValue=function(e,o){var t="";if(!e)return void 0===o||null===o?null:o;if(3==e.nodeType||4==e.nodeType||2==e.nodeType)t+=e.nodeValue;else if(1==e.nodeType||9==e.nodeType||11==e.nodeType)for(var r=0;r<e.childNodes.length;++r)t+=arguments.callee(e.childNodes[r]);return t},geoXML3.getBooleanValue=function(e,o){var t=geoXML3.nodeValue(e);return null===t?o||!1:(t=parseInt(t),!!isNaN(t)||0!=t)},geoXML3.getElementsByTagNameNS=function(e,o,t){if(e&&void 0!==e.getElementsByTagNameNS)return e.getElementsByTagNameNS(o,t);if(!e)return[];var r=e.documentElement||e.ownerDocument&&e.ownerDocument.documentElement;if(!r||!r.attributes)return[];for(var n=0;n<r.attributes.length;n++){var i=r.attributes[n];if("xmlns"===i.prefix&&i.nodeValue===o)return e.getElementsByTagName(i.baseName+":"+t);if("xmlns"===i.nodeName&&i.nodeValue===o)return void 0!==e.selectNodes?(r.ownerDocument.getProperty("SelectionNamespaces")||r.ownerDocument.setProperty("SelectionNamespaces","xmlns:defaultNS='"+o+"'"),e.selectNodes(".//defaultNS:"+t)):(r.setAttribute("xmlns:defaultNS",o),e.getElementsByTagName("defaultNS:"+t))}return geoXML3.getElementsByTagName(e,t)},geoXML3.getElementsByTagName=function(e,o){return e&&e.getElementsByTagNameNS,e.getElementsByTagName(o)};var toAbsURL=function(e,o){var t,r,n,i=location.protocol+"://"+location.host;if(!o.length)return"";if(/^\w+:/.test(o))return o;if(0==o.indexOf("/"))return i+o;if(t=e.replace(/\/[^\/]*$/,""),r=o.match(/\.\.\//g))for(o=o.substring(3*r.length),n=r.length;n--;)t=t.substring(0,t.lastIndexOf("/"));return i+t+"/"+o},internalSrc=function(e){var o=document.location.href;return(o=o.substring(0,o.lastIndexOf("/")+1))+e},dehostURL=function(e){var o=location.protocol+"://"+location.host;return o=o.replace(/([\.\\\+\*\?\[\^\]\$\(\)])/g,"\\$1"),e.replace(new RegExp("^"+o,"i"),"")},cleanURL=function(e,o){return dehostURL(toAbsURL(e?e.split("#")[0].split("?")[0]:defileURL(location.pathname),o?o.split("#")[0].split("?")[0]:""))},defileURL=function(e){return e?e.substr(0,e.lastIndexOf("/")+1):"/"};Array.prototype.hasObject=Array.indexOf?function(e){return-1!==this.indexOf(e)}:function(e){for(var o=this.length+1;o--;)if(this[o-1]===e)return!0;return!1},Array.prototype.hasItemInObj=function(e,o){for(var t=this.length+1;t--;)if(this[t-1][e]===o)return!0;return!1},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,o){null==o?o=0:o<0&&(o=Math.max(0,this.length+o));for(var t=o,r=this.length;t<r;t++)if(this[t]===e)return t;return-1}),Array.prototype.indexOfObjWithItem=function(e,o,t){null==t?t=0:t<0&&(t=Math.max(0,this.length+t));for(var r=t,n=this.length;r<n;r++)if(this[r][e]===o)return r;return-1};var base64Encode=function(e){for(var o,t,r,n,i,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",g=0;g<e.length;)n=(3&(o=e[g++]))<<4|(t=e[g++])>>4,i=(15&t)<<2|(r=e[g++])>>6,a=63&r,void 0==t?i=a=64:void 0==r&&(a=64),s=s+l.charAt(o>>2)+l.charAt(n)+l.charAt(i)+l.charAt(a);return s};